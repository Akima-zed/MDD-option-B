<app-header></app-header>

<div class="feed-container">
  <div class="feed-content">
    <div class="feed-actions">
      <h1>Articles</h1>
      <button mat-fab color="primary" class="create-button" (click)="createArticle()" aria-label="Créer un article">
        <mat-icon>add</mat-icon>
      </button>
    </div>

    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner></mat-spinner>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div *ngIf="!isLoading && articles.length === 0" class="empty-state">
      <mat-icon>article</mat-icon>
      <p>Aucun article disponible</p>
      <p class="subtitle">Abonnez-vous à des thèmes pour voir des articles</p>
    </div>

    <div class="articles-list" *ngIf="!isLoading && articles.length > 0">
      <mat-card *ngFor="let article of articles" class="article-card" (click)="viewArticle(article.id)">
        <mat-card-header>
          <mat-card-title>{{ article.titre }}</mat-card-title>
          <mat-card-subtitle>
            <span class="author">Par {{ article.auteur.username }}</span>
            <span class="separator"> • </span>
            <span class="date">{{ article.dateCreation | date: 'dd MMMM yyyy' }}</span>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="article-theme">
            <mat-icon>label</mat-icon>
            <span>{{ article.theme.nom }}</span>
          </div>
          <p class="article-preview">{{ article.contenu | slice:0:150 }}<span *ngIf="article.contenu.length > 150">...</span></p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
